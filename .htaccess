<IfModule mod_rewrite.c>
  # Error handling
  ErrorDocument 403 /404.php
  ErrorDocument 404 /404.php
  ErrorDocument 500 /404.php

  # Disable directory browsing
  Options -Indexes

  # Prevent access to sensitive folders
  RewriteEngine On
  RedirectMatch 404 /.login/?$
  RedirectMatch 404 /src/?

  # Define clean urls for browsing
  RewriteRule ^film/(\d+) film.php?film_id=$1
  RewriteRule ^director/(\d+) director.php?director_id=$1

  # Duplicate original directory URL for web compat
  RewriteRule ^films/view/(\d+) film.php?film_id=$1
</IfModule>

<IfModule mod_deflate.c>
  # Enable gzip compression
  # https://varvy.com/pagespeed/enable-compression.html
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# TODO: Add caching, expires
